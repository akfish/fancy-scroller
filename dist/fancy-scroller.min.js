!function(t,i){function e(t,i){var e=document.createElement(t);return i&&(e.className=i.join(" ")),e}function n(){for(var t={},i=0;i<arguments.length;i++)for(var e in arguments[i])t[e]=arguments[i][e];return t}!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}(),t.LOADED_STYLES=t.LOADED_STYLES||{},t.loadStyle=function(i){if(!t.LOADED_STYLES[i]){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",i),document.getElementsByTagName("head")[0].appendChild(e),t.LOADED_STYLES[i]=!0}};t.ready=function(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)};var o={friction:.9,maxEndSpringLength:64,overlapFactor:.6,snapTime:300,snapSectionTop:!0,snapSectionBottom:!0,showMobileScrollIndicator:!0,hashPrefix:"section-",autoSetHash:!1,debug:!1,animationEpsilon:.01},s={log:function(){console.log.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},a={log:function(){},warn:function(){},error:function(){}},h=function(t,i){this.opts=n(o,i),this.console=this.opts.debug?s:a,this.container=t,this.el=e("div",["wrapper"]),this.container.appendChild(this.el),this.strecher=e("div",["strecher"]),this.inner=e("div",["inner"]),this.indicator=e("div",["mobile-scroll-indicator"]),this.indicator.activeAttr=document.createAttribute("active"),this.indicator.activeAttr.value=!1,this.indicator.setAttributeNode(this.indicator.activeAttr),this.opts.showMobileScrollIndicator||(this.indicator.style.display="none"),this.el.appendChild(this.strecher),this.el.appendChild(this.inner),this.el.appendChild(this.indicator),this.sections=this.container.querySelectorAll(".section");for(var h=0;h<this.sections.length;h++)this.inner.appendChild(this.sections[h]);this._mouseDown=!1,this.initialClassName=this.el.className,this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop,this._movement={moving:!1,lastPosition:0,lastTime:0,startPosition:0,startTime:0,dY:0,velocity:0,dT:0},this._animation={epsilon:this.opts.animationEpsilon,animating:!1,shouldCancel:!1,lastTick:0,tickCallback:null,targetState:null,completeCallback:null},this._handlers={},document.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),window.addEventListener("hashchange",this.onHashChange.bind(this)),this.el.addEventListener("touchstart",this.onTouchStart.bind(this)),this.el.addEventListener("touchmove",this.onTouchMove.bind(this)),this.el.addEventListener("touchend",this.onTouchEnd.bind(this)),this.el.addEventListener("mousedown",this.onMouseDown.bind(this)),this.el.addEventListener("mousemove",this.onMouseMove.bind(this)),this.el.addEventListener("mouseup",this.onMouseUp.bind(this)),this.init()};h.prototype.on=function(t,i){this.console.log("On "+t+", do "+i),this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(i)},h.prototype.off=function(t,i){if(this.console.log("Off "+t+", do "+i),this._handlers[t]){var e=this._handlers[t];if(this._handlers[t]=[],i)for(var n=0;n<e.length;n++)e[n]!=i&&this._handlers[t].push(e[n])}},h.prototype.trigger=function(t){if(this.console.log("Trigger "+t),this._handlers[t])for(var i=this._handlers[t],e=Array.prototype.slice.call(arguments,1),n=0;n<i.length;n++){var o=i[n];o.apply(this,e)}},h.prototype.init=function(){this.currentSectionIndex=0,this.updateHeightMap(),this.mobileMediaQuery=window.matchMedia("only screen and (max-width: 529px), only screen and (min-width: 530px) and (max-width: 949px)"),this.onHashChange(),this.trigger("initialized")},h.prototype.onResize=function(){this.updateHeightMap(),this.trigger("resized")},h.prototype.onHashChange=function(t){var i=this._hashToIndex[location.hash.substr(1)];this._animation.shouldCancel=!0;var e=i>0?this._accumulated[i-1]:0;this.snapTo(e,!this.mobileMediaQuery.matches)},h.prototype.startAnimation=function(t,i,e){this._animation.lastTick=window.performance.now(),this._animation.animating=!0,this._animation.shouldCancel=!1,this._animation.tickCallback=t,this._animation.targetState=i,this._animation.completeCallback=e,requestAnimationFrame(this.tick.bind(this)),this.trigger("animation_start")},h.prototype.tick=function(t){if(this._animation.shouldCancel)return this.trigger("animation_cancelled");this._animation.animating=!0;var i=window.performance.now(),e=i-this._animation.lastTick;this._animation.lastTick=i;var n=this._animation.tickCallback(e),o=this._animation.targetState;Math.abs(n-o)>this._animation.epsilon?requestAnimationFrame(this.tick.bind(this)):(this._animation.completeCallback&&this._animation.completeCallback(),this._animation.animating=!1,this.trigger("animation_end"))},h.prototype.handleMoveStart=function(t,i){this.indicator.activeAttr.value=!0,this.el.className+=" noselect",document.removeEventListener("scroll",this.onScroll.bind(this));var e=window.performance.now();this._movement.moving=!0,this._movement.lastPosition=this._movement.startPosition=t,this._movement.lastTime=this._movement.startTime=e,this._movement.updateScrollBar=i,this._animation.shouldCancel=!0,this.trigger("force_start",this._movement),this.trigger("move_start",this._movement)},h.prototype.updateMovement=function(t,i){{var e=this._movement.dY=t-this._movement.lastPosition,n=window.performance.now(),o=this._movement.dT=n-this._movement.lastTime;this._movement.velocity=e/o}this._movement.lastTime=n,this._movement.lastPosition=t,this._movement.updateScrollBar=i},h.prototype.scrollByDelta=function(t,i){var e=this.scrollTop,n=e-t;this.scrollTo(n,i)},h.prototype.handleMoveUpdate=function(t,i){this._movement.moving&&(this.updateMovement(t,i),this.scrollByDelta(this._movement.dY,i),this.trigger("force_update",this._movement))},h.prototype.handleMoveEnd=function(t){this.el.className=this.initialClassName,document.addEventListener("scroll",this.onScroll.bind(this)),this._movement.moving=!1,this.trigger("force_end",this._movement);var i=this;this.trigger("inertia_start",this._movement),this.startAnimation(function(t){var e=i._movement.velocity*t;return i.scrollByDelta(e,i._movement.updateScrollBar),i._movement.velocity*=i.opts.friction,(i.scrollTop<=-i.opts.maxEndSpringLength||i.scrollTop+window.innerHeight>i.totalHeight+i.opts.maxEndSpringLength*i.opts.overlapFactor)&&(i._movement.velocity=0),i._movement.velocity},0,i.onMovementComplete.bind(i))},h.prototype.onSnapComplete=function(){this.indicator.activeAttr.value=!1,this.trigger("snap_end"),this.trigger("move_end")},h.prototype.onMovementComplete=function(){this.trigger("inertia_end",this._movement);var t;this.scrollTop<0?t=0:this.scrollTop+window.innerHeight>this.totalHeight?t=this.totalHeight-window.innerHeight:this.opts.snapSectionTop&&this.visibleSectionBorderPos>0&&this.visibleSectionBorderPos<.3*window.innerHeight?t=this._accumulated[this.currentSectionIndex]:this.opts.snapSectionBottom&&this.visibleSectionBorderPos>.7*window.innerHeight&&this.visibleSectionBorderPos<window.innerHeight&&(t=this._accumulated[this.currentSectionIndex]-window.innerHeight),this.snapTo(t,this._movement.updateScrollBar)},h.prototype.snapTo=function(t,i){var e=this.opts.snapTime;if(this.trigger("snap_start",t),null===t||isNaN(t))this.onSnapComplete();else{var n=this,o=0,s=this.scrollTop,a=t-s;this.startAnimation(function(t){o+=t,f=Math.min(1,o/e);var h=s+f*f*a;return n.scrollTo(h,i),f},1,this.onSnapComplete.bind(this))}},h.prototype.onTouchStart=function(t){t.preventDefault(),this.handleMoveStart(t.pageY||t.touches[0].pageY||t.targetTouches[0].pageY,!1)},h.prototype.onTouchMove=function(t){this.handleMoveUpdate(t.pageY||t.touches[0].pageY||t.targetTouches[0].pageY,!1)},h.prototype.onTouchEnd=function(t){this.handleMoveEnd(t.clientY)},h.prototype.onMouseDown=function(t){this.handleMoveStart(t.clientY,!0)},h.prototype.onMouseMove=function(t){this.handleMoveUpdate(t.clientY,!0)},h.prototype.onMouseUp=function(t){this.handleMoveEnd(t.clientY)},h.prototype.updateHeightMap=function(){this._heights=[],this._accumulated=[],this._hashToIndex={},this._hashes=[];for(var t=0,i=0;i<this.sections.length;i++){var e=this.sections[i],n=e.clientHeight||e.offsetHeight,o=e.getAttribute("name")||this.opts.hashPrefix+i;e.style.top=t+"px",this._hashToIndex[o]=i,this._hashes.push(o),this._heights.push(n),t+=n,this._accumulated.push(t)}this.totalHeight=t,this.strecher.style.height=t+"px",this.indicator.style.height=window.innerHeight/this.totalHeight*window.innerHeight+"px"},h.prototype.scrollTo=function(t,i){function e(t,i){var e=t.style;e.transform=e["-webkit-transform"]=i}this.topOvershoot=this.bottomOvershoot=!1,t<-this.opts.maxEndSpringLength?(t=-this.opts.maxEndSpringLength,this.topOvershoot=!0):t+window.innerHeight>this.totalHeight+this.opts.maxEndSpringLength&&(t=this.totalHeight-window.innerHeight+this.opts.maxEndSpringLength,this.bottomOvershoot=!0);var n;for(n=0;n<this.sections.length&&!(t<this._accumulated[n]);n++);if(this.visibleSectionBorderPos=0>t?-t:this._accumulated[n]-t,this.sectionRemaining=this.visibleSectionBorderPos/this._heights[n],this.opts.autoSetHash&&this.currentSectionIndex!=n&&!this._animation.animating){var o="#"+this._hashes[n];location.hash!==o&&history.pushState(null,null,o),this.trigger("hash_update",o)}n!=this.currentSectionIndex&&(this.trigger("section_changing",n),this.currentSectionIndex=n,this.trigger("section_changed",n));var s=this.sections[n],a=this.sections[n+1];if(e(this.inner,"translateY("+-t+"px)"),t+window.innerHeight>this._accumulated[n]){var h=this._accumulated[n]-t,r=h/window.innerHeight;e(s,"translateY("+(1-r)*this.opts.overlapFactor*window.innerHeight+"px)"),a&&(e(a,"translateY(0)"),a.style["box-shadow"]="0 0px "+50*r+"px 1px rgba(0, 0, 0, 0.7)")}else if(0>t){var l=-t/window.innerHeight;s.style["box-shadow"]="0 0px "+50*l+"px 1px rgba(0, 0, 0, 0.7)"}else n!=this.sections.length-1&&e(s,"translateY(0)");this.indicator.style.top=t/this.totalHeight*window.innerHeight+"px",this.scrollTop=t,i&&(document.documentElement.scrollTop=document.body.scrollTop=t),this.trigger("scrolled",{scrollTop:t,sectionRemaining:this.sectionRemaining})},h.prototype.doScroll=function(){if(!this._animation.animating){var t=document.documentElement.scrollTop||document.body.scrollTop;this.scrollTo(t)}},h.prototype.onScroll=function(t){this.doScroll()},t.FancyScroller=h}(window,document.querySelector.bind(document));